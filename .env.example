# ============================================================================
# ğŸš€ Open SWE Environment Configuration
# ============================================================================
# This file contains all environment variables needed for Open SWE.
# Copy this file to .env and fill in your actual values.
# 
# ğŸ”’ SECURITY NOTE: Never commit .env files to version control!
# ============================================================================

# ============================================================================
# ğŸ” SECURITY & AUTHENTICATION
# ============================================================================

# ğŸ‘¥ Access Control - List of GitHub usernames allowed to use Open SWE
# This is the PRIMARY security mechanism for production deployments
# Must be a valid JSON array of strings (no @ symbols)
# In development, all users are allowed regardless of this setting
NEXT_PUBLIC_ALLOWED_USERS_LIST='["your-github-username", "teammate-1", "teammate-2"]'

# ğŸ”‘ API Bearer Tokens - For programmatic access (CLI, scripts, integrations)
# Single token approach:
API_BEARER_TOKEN="your-secure-api-token-here"
# OR multiple tokens (comma-separated):
# API_BEARER_TOKENS="token-1,token-2,token-3"

# ğŸ” Encryption Key - 32-byte hex string for AES-256 encryption
# CRITICAL: Must be the same across web app and agent for secret sharing
# Generate with: openssl rand -hex 32
SECRETS_ENCRYPTION_KEY="your-32-byte-hex-encryption-key-here"

# ============================================================================
# ğŸ™ GITHUB APP CONFIGURATION
# ============================================================================

# ğŸ“± GitHub App Basic Settings
GITHUB_APP_NAME="your-github-app-name"  # Must match your GitHub app name (no spaces)
GITHUB_APP_ID="123456"  # Your GitHub App ID (numeric)

# ğŸ”‘ GitHub App Authentication
# OAuth credentials for web login flow
NEXT_PUBLIC_GITHUB_APP_CLIENT_ID="Iv1.your-client-id"
GITHUB_APP_CLIENT_SECRET="your-github-app-client-secret"

# ğŸ” GitHub App Private Key (Multi-line RSA key)
GITHUB_APP_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----
MIIEpAIBAAKCAQEA...your-private-key-content...
-----END RSA PRIVATE KEY-----"

# ğŸª GitHub Webhook Configuration
GITHUB_WEBHOOK_SECRET="your-webhook-secret-here"  # Generate with: openssl rand -hex 32
GITHUB_TRIGGER_USERNAME="your-github-username"  # Username to tag for PR comment triggers (no @)

# ğŸ”„ GitHub App Redirect URI
# Update to your production URL when deployed
GITHUB_APP_REDIRECT_URI="http://localhost:3000/api/auth/github/callback"

# ============================================================================
# ğŸ¤– LLM PROVIDER API KEYS
# ============================================================================

# ğŸ§  Anthropic (Claude) - Primary LLM provider
ANTHROPIC_API_KEY="sk-ant-api03-your-anthropic-key-here"

# ğŸ¤– OpenAI (GPT models)
OPENAI_API_KEY="sk-your-openai-key-here"

# ğŸ” Google AI (Gemini models)
GOOGLE_API_KEY="your-google-ai-api-key-here"

# ============================================================================
# ğŸŒ INFRASTRUCTURE & NETWORKING
# ============================================================================

# ğŸŒ Application URLs
# Web app URL - update for production deployment
OPEN_SWE_APP_URL="http://localhost:3000"

# ğŸ”— API Configuration
NEXT_PUBLIC_API_URL="http://localhost:3000/api"  # Next.js proxy route URL
LANGGRAPH_API_URL="http://localhost:2024"  # LangGraph server URL

# ğŸšª Port Configuration
PORT="2024"  # LangGraph server port (defaults to 2024)

# ğŸŒ Environment Mode
NODE_ENV="development"  # Set to "production" for production deployments

# ============================================================================
# ğŸ“Š MONITORING & TRACING
# ============================================================================

# ğŸ” LangSmith Configuration
LANGCHAIN_PROJECT="open-swe-project"  # Your LangSmith project name
LANGCHAIN_API_KEY="lsv2_pt_your-langsmith-api-key-here"
LANGCHAIN_TRACING_V2="true"  # Enable LangSmith tracing

# ğŸ“ˆ Test Tracking
# Set to true when ready to upload eval results to LangSmith
LANGCHAIN_TEST_TRACKING="false"

# ============================================================================
# ğŸ“‹ LINEAR INTEGRATION (OPTIONAL)
# ============================================================================

# ğŸ”— Linear API Configuration
# Get your API key from: https://linear.app/settings/api
LINEAR_API_KEY="lin_api_your-linear-api-key-here"

# ğŸ¢ Linear Workspace Configuration
# Find your workspace ID in Linear settings or via API
LINEAR_WORKSPACE_ID="your-linear-workspace-id-here"

# ğŸ‘¥ Linear Team Configuration
# Default team ID for issue creation (optional, can be set per-request)
LINEAR_TEAM_ID="your-linear-team-id-here"

# ğŸª Linear Webhook Configuration
# Generate with: openssl rand -hex 32
LINEAR_WEBHOOK_SECRET="your-linear-webhook-secret-here"

# ============================================================================
# ğŸ› ï¸ EXTERNAL TOOLS & SERVICES
# ============================================================================

# ğŸ•·ï¸ Firecrawl - Web scraping and content extraction
FIRECRAWL_API_KEY="fc-your-firecrawl-api-key-here"

# â˜ï¸ Daytona - Cloud sandbox management
DAYTONA_API_KEY="your-daytona-api-key-here"

# ============================================================================
# âš™ï¸ APPLICATION CONFIGURATION
# ============================================================================

# ğŸš« CI Skip Configuration
# Append "[skip ci]" to commit messages to avoid triggering CI on intermediate commits
SKIP_CI_UNTIL_LAST_COMMIT="true"

# ============================================================================
# ğŸ  LOCAL DEVELOPMENT & CLI
# ============================================================================

# ğŸ’» CLI Configuration
# Set to true for local CLI usage
OPEN_SWE_LOCAL_MODE="false"
# Path to local project when using CLI in local mode
OPEN_SWE_LOCAL_PROJECT_PATH=""

# ============================================================================
# ğŸ”§ ADVANCED CONFIGURATION
# ============================================================================

# ğŸ¯ LangGraph User Permissions
# These are typically set automatically, but can be overridden if needed
# LANGGRAPH_USER_PERMISSIONS="read,write,create,delete"

# ğŸ·ï¸ Custom Headers (Advanced)
# These are used internally by the system for authentication
# LOCAL_MODE_HEADER="X-Local-Mode"
# GITHUB_USER_ID_HEADER="X-Github-User-Id"
# GITHUB_USER_LOGIN_HEADER="X-Github-User-Login"

# ============================================================================
# ğŸ“ USAGE NOTES
# ============================================================================
#
# ğŸ”’ SECURITY CHECKLIST:
# - [ ] Update NEXT_PUBLIC_ALLOWED_USERS_LIST with your team members
# - [ ] Generate secure SECRETS_ENCRYPTION_KEY (32-byte hex)
# - [ ] Set strong GITHUB_WEBHOOK_SECRET
# - [ ] Use different GitHub Apps for dev/prod
# - [ ] Never commit this file to version control
#
# ğŸš€ DEPLOYMENT CHECKLIST:
# - [ ] Update all URLs to production domains
# - [ ] Set NODE_ENV="production"
# - [ ] Configure GitHub App redirect URI
# - [ ] Test webhook delivery
# - [ ] Verify access control works
#
# ğŸ”§ DEVELOPMENT TIPS:
# - Copy this file to .env and fill in your values
# - Use different values for development and production
# - Test with a separate GitHub App for development
# - Monitor logs for authentication issues
#
# ============================================================================
